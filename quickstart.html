

<!DOCTYPE html>




<html lang="en">
  <head>
    <meta charset="utf-8" />
    
    <title>QuickStart: playing with an Ergo-Robot &mdash; pypot 2.11.2 documentation</title>
    <meta name="description" content="">
    <meta name="author" content="">

    

<link rel="stylesheet" href="_static/css/basicstrap-base.css" type="text/css" />
<link rel="stylesheet" id="current-theme" href="_static/css/bootstrap3/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" id="current-adjust-theme" type="text/css" />

<link rel="stylesheet" href="_static/css/font-awesome.min.css">

<style type="text/css">
  body {
    padding-top: 60px;
    padding-bottom: 40px;
  }
</style>

<link rel="stylesheet" href="_static/css/basicstrap.css" type="text/css" />
<link rel="stylesheet" href="_static/pygments.css" type="text/css" />
<link rel="stylesheet" href="_static/my-css.css" type="text/css" />
    
<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    './',
            VERSION:     '2.11.2',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
  };
</script>
    <script type="text/javascript" src="_static/js/jquery.min.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/bootstrap3.min.js"></script>
<script type="text/javascript" src="_static/js/jquery.cookie.min.js"></script>
<script type="text/javascript" src="_static/js/basicstrap.js"></script>
<script type="text/javascript">
</script>
    <link rel="shortcut icon" href="_static/pypot_logo-48x48.png"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="pypot 2.11.2 documentation" href="index.html" />
    <link rel="next" title="Controlling robot" href="controlling_robot.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
  </head>
  <body role="document">
    <div id="navbar-top" class="navbar navbar-fixed-top navbar-default" role="navigation" aria-label="top navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">pypot 2.11.2 documentation</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
              <li class="dropdown visible-xs">
                <a role="button" id="localToc" data-toggle="dropdown" data-target="#" href="#">Table Of Contents <b class="caret"></b></a>
                <ul class="dropdown-menu localtoc sp-localtoc" role="menu" aria-labelledby="localToc">
                <ul>
<li><a class="reference internal" href="#">QuickStart: playing with an Ergo-Robot</a><ul>
<li><a class="reference internal" href="#building-your-own-ergo-robot">Building your own Ergo-Robot</a></li>
<li><a class="reference internal" href="#connecting-the-robot-to-your-computer">Connecting the robot to your computer</a></li>
<li><a class="reference internal" href="#controlling-your-ergo-robot">Controlling your Ergo-Robot</a></li>
</ul>
</li>
</ul>

                </ul>
              </li>

            
              <li><a href="installation.html" title="Installation" accesskey="P">previous </a></li>
              <li><a href="controlling_robot.html" title="Controlling robot" accesskey="N">next </a></li>
              <li><a href="py-modindex.html" title="Python Module Index" >modules </a></li>
              <li><a href="genindex.html" title="General Index" accesskey="I">index </a></li>
            
            <li class="visible-xs"><a href="_sources/quickstart.txt" rel="nofollow">Show Source</a></li>

            <li class="visible-xs">
                <form class="search form-search form-inline navbar-form navbar-right sp-searchbox" action="search.html" method="get">
                  <div class="input-append input-group">
                    <input type="text" class="search-query form-control" name="q" placeholder="Search...">
                    <span class="input-group-btn">
                    <input type="submit" class="btn" value="Go" />
                    </span>
                  </div>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </li>

            

          </ul>

        </div>
      </div>
    </div>
    

    <!-- container -->
    <div class="container-fluid">

      <!-- row -->
      <div class="row">
         
<div class="col-md-3 hidden-xs" id="sidebar-wrapper">
  <div class="sidebar hidden-xs" role="navigation" aria-label="main navigation">
    <p class="logo"><a href="index.html">
      <img class="logo" src="_static/pypot_logo-144x144.png" alt="Logo"/>
    </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">QuickStart: playing with an Ergo-Robot</a><ul>
<li><a class="reference internal" href="#building-your-own-ergo-robot">Building your own Ergo-Robot</a></li>
<li><a class="reference internal" href="#connecting-the-robot-to-your-computer">Connecting the robot to your computer</a></li>
<li><a class="reference internal" href="#controlling-your-ergo-robot">Controlling your Ergo-Robot</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="controlling_robot.html"
                        title="next chapter">Controlling robot</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/quickstart.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" role="search">
  <h3>Quick search</h3>
  <form class="search form-inline" action="search.html" method="get">
      <div class="input-append input-group">
        <input type="text" class="search-query form-control" name="q" placeholder="Search...">
        <span class="input-group-btn">
        <input type="submit" class="btn" value="Go" />
        </span>
      </div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
  </div>
</div> 
        

        <div class="col-md-9" id="content-wrapper">
          <div class="document" role="main">
            <div class="documentwrapper">
              <div class="bodywrapper">
                <div class="body">
                  
  <div class="section" id="quickstart-playing-with-an-ergo-robot">
<span id="quickstart"></span><h1>QuickStart: playing with an Ergo-Robot<a class="headerlink" href="#quickstart-playing-with-an-ergo-robot" title="Permalink to this headline">¶</a></h1>
<p>To let you discover what you can do with pypot, in this section we describe the few steps required to make a robot build from robotis motor dance. This short introduction will in particular describe you:</p>
<ul class="simple">
<li>how to define your robot within the software,</li>
<li>how to connect it to your computer,</li>
<li>and finally how to control it.</li>
</ul>
<p>We have developed in our team the Ergo-Robot as a way to explore large scale long term robotic experiments outside of the lab and we have made the whole hardware and software architecture available publicly in an open-source manner so that other research team in the world can use it and leverage our efforts for their own research. As a consequence, you can easily build your own Ergo-Robot.</p>
<p>In this Quick Start, we will use this robot as a base and thus assume that you are using such a robot. Obviously, you can transpose all the following examples to any particular robot made from robotis motor.</p>
<div class="section" id="building-your-own-ergo-robot">
<h2>Building your own Ergo-Robot<a class="headerlink" href="#building-your-own-ergo-robot" title="Permalink to this headline">¶</a></h2>
<p>Ergo-Robots have been developed for an art exhibition in Fondation Cartier: <a class="reference external" href="http://fondation.cartier.com/en/art-contemporain/26/exhibitions/294/all-the-exhibitions/89/mathematics-a-beautiful-elsewhere/">Mathematics a beautiful elsewhere</a>. They are small creatures made from robotis motors and shaped as a stem with a head designed by David Lynch. They were developed to explore research topics such as artificial curiosity and language games. The robots were used during 5 months at the exhibition. More details on the whole project can be found <a class="reference external" href="https://www.poppy-project.org/project/mathematics-a-beautiful-elsewhere">here</a>.</p>
<a class="reference internal image-reference" href="_images/ErgoRobots.jpg"><img alt="_images/ErgoRobots.jpg" class="align-center" src="_images/ErgoRobots.jpg" style="height: 400px;" /></a>
<p>The complete instructions to build your own Ergo-Robot are available <a class="reference external" href="https://wiki.bordeaux.inria.fr/flowers/doku.php?id=robot:ergorobot:construction">here</a>.</p>
</div>
<div class="section" id="connecting-the-robot-to-your-computer">
<h2>Connecting the robot to your computer<a class="headerlink" href="#connecting-the-robot-to-your-computer" title="Permalink to this headline">¶</a></h2>
<p>Now that you have your own robot, let&#8217;s start writing the code necessary to control it.</p>
<p>The first step is to setup the configuration for your robot. It will describe the motor configuration of your robot, the USB2serial controller used and make the initialization really easy. Configurations are described as Python dictionaries. Yet, they can be quite repetitive to write. Luckily, the pypot package comes with an example of a configuration for an Ergo-Robot. You can first import it, so you can modify it:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pypot.robot.config</span> <span class="kn">import</span> <span class="n">ergo_robot_config</span>
</pre></div>
</div>
<p>If you do some introspection on this object, you will see that it is just a regular Python dictionary. So you can directly edit it like you will do with any other dict. You can also copy the one provided with pypot and work with your own copy:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">my_config</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">ergo_robot_config</span><span class="p">)</span>
<span class="n">my_config</span><span class="p">[</span><span class="s1">&#39;controllers&#39;</span><span class="p">][</span><span class="s1">&#39;my_dxl_controller&#39;</span><span class="p">][</span><span class="s1">&#39;port&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="s1">&#39;COM6&#39;</span> <span class="c1"># For Windows&#39; users</span>
</pre></div>
</div>
<p>You will only have to modify the USB2serial port and the id of the motors so they correspond to your robot. If you do not know how to get this information, you can refer to the documentation on the <a class="reference internal" href="herborist.html#herborist"><span>Herborist tool</span></a>. Alternatively, you can directly ask pypot:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pypot.dynamixel</span>

<span class="k">print</span><span class="p">(</span><span class="n">pypot</span><span class="o">.</span><span class="n">dynamixel</span><span class="o">.</span><span class="n">get_available_ports</span><span class="p">())</span>
<span class="p">[</span><span class="s1">&#39;/dev/tty.usbserial-A4008aCD&#39;</span><span class="p">,</span> <span class="s1">&#39;/dev/tty.usbmodemfd1311&#39;</span><span class="p">]</span>

<span class="n">dxl_io</span> <span class="o">=</span> <span class="n">pypot</span><span class="o">.</span><span class="n">dynamixel</span><span class="o">.</span><span class="n">DxlIO</span><span class="p">(</span><span class="s1">&#39;/dev/tty.usbserial-A4008aCD&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">dxl_io</span><span class="o">.</span><span class="n">scan</span><span class="p">())</span>
<span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can save/load configurations from any format that can be written/read as a Python dictionary. A wrapper for loading json configuration file is provided (see <a class="reference internal" href="pypot.robot.html#pypot.robot.config.from_json" title="pypot.robot.config.from_json"><code class="xref py py-func docutils literal"><span class="pre">from_json()</span></code></a>).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Since pypot 1.7, you can now set the port to &#8216;auto&#8217; in the dictionary. When loading the configuration, pypot will automatically try to find the port with the corresponding attached motor ids.
For instance:</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span><span class="n">my_config</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">ergo_robot_config</span><span class="p">)</span>
<span class="n">my_config</span><span class="p">[</span><span class="s1">&#39;controllers&#39;</span><span class="p">][</span><span class="s1">&#39;my_dxl_controller&#39;</span><span class="p">][</span><span class="s1">&#39;port&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="s1">&#39;auto&#39;</span>
</pre></div>
</div>
</div>
<p>Once you have edited the configuration dictionary, you should be able to instantiate your robot directly like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pypot.robot</span>

<span class="n">ergo_robot</span> <span class="o">=</span> <span class="n">pypot</span><span class="o">.</span><span class="n">robot</span><span class="o">.</span><span class="n">from_config</span><span class="p">(</span><span class="n">my_config</span><span class="p">)</span>
</pre></div>
</div>
<p>At this point, if you have not seen any errors it means that you are successfully connected to your robot! You can find details on how to write more complex configuration file in the <a class="reference internal" href="controller.html#config-file"><span>Writing the configuration</span></a> section.</p>
</div>
<div class="section" id="controlling-your-ergo-robot">
<span id="dance"></span><h2>Controlling your Ergo-Robot<a class="headerlink" href="#controlling-your-ergo-robot" title="Permalink to this headline">¶</a></h2>
<p>Now that you are connected to your Ergo-Robot, let&#8217;s write a very simple program to make it dance a bit.</p>
<p>First, write the following lines to start you robot (we assume that you have correctly setup your configuration):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pypot.robot</span>

<span class="n">ergo_robot</span> <span class="o">=</span> <span class="n">pypot</span><span class="o">.</span><span class="n">robot</span><span class="o">.</span><span class="n">from_config</span><span class="p">(</span><span class="n">my_config</span><span class="p">)</span>
</pre></div>
</div>
<p>Everything should be clear now. When creating your robot, it automatically starts the synchronization between the &#8220;software&#8221; robot and the real one, i.e. all commands that you will send in python code will automatically be sent to the physical Ergo-Robot (for details on the underlying mechanisms, see <a class="reference internal" href="controller.html#sync-loop"><span>Sync Loop</span></a>).</p>
<p>Now, we are going to put the robot in its initial position:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">ergo_robot</span><span class="o">.</span><span class="n">motors</span><span class="p">:</span>
    <span class="n">m</span><span class="o">.</span><span class="n">compliant</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="c1"># Go to the position 0 within 2 seconds.</span>
    <span class="c1"># Note that the position is expressed in degrees.</span>
    <span class="n">m</span><span class="o">.</span><span class="n">goto_position</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>The robot should raise and smoothly go to its base position. Now, we are going to move it to a more stable position. We will use it as a rest position for our dance:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">rest_pos</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;base_tilt_lower&#39;</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span>
            <span class="s1">&#39;base_tilt_upper&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">45</span><span class="p">,</span>
            <span class="s1">&#39;head_tilt_lower&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
            <span class="s1">&#39;head_tilt_upper&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">30</span><span class="p">}</span>

<span class="c1"># You can directly set new positions to motors by providing</span>
<span class="c1"># the Robot goto_position method with a dictionary such as</span>
<span class="c1"># {motor_name: position, motor_name: position...}</span>
<span class="n">ergo_robot</span><span class="o">.</span><span class="n">goto_position</span><span class="p">(</span><span class="n">rest_pos</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>We will now create a very simple dance just by applying two sinus with opposite phases on the base and head motors of the robot:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">amp</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">freq</span> <span class="o">=</span> <span class="mf">0.5</span>

<span class="c1"># As you can notice, property to access the motors defined</span>
<span class="c1"># in the configuration file are automatically created.</span>
<span class="n">ergo_robot</span><span class="o">.</span><span class="n">base_pan</span><span class="o">.</span><span class="n">moving_speed</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># 0 corresponds to the max speed</span>
<span class="n">ergo_robot</span><span class="o">.</span><span class="n">head_pan</span><span class="o">.</span><span class="n">moving_speed</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span>
    <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">break</span>

    <span class="n">x</span> <span class="o">=</span> <span class="n">amp</span> <span class="o">*</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">numpy</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">freq</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>
    <span class="n">ergo_robot</span><span class="o">.</span><span class="n">base_pan</span><span class="o">.</span><span class="n">goal_position</span> <span class="o">=</span> <span class="n">x</span>
    <span class="n">ergo_robot</span><span class="o">.</span><span class="n">head_pan</span><span class="o">.</span><span class="n">goal_position</span> <span class="o">=</span> <span class="o">-</span><span class="n">x</span>

    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.02</span><span class="p">)</span>
</pre></div>
</div>
<p>Your robot should start dancing for ten seconds. Now, that you have seen the very basic things that you can do with pypot. It is time to jump on the <a class="reference internal" href="index.html#tutorial"><span>tutorial</span></a> to get a complete overview of the possibility.</p>
</div>
</div>


                </div>
              </div>
            </div>
          </div>
        </div>
        
        
      </div><!-- /row -->

      <!-- row -->
      <div class="row footer-relbar">
<div id="navbar-related" class=" related navbar navbar-default" role="navigation" aria-label="related navigation">
  <div class="navbar-inner">
    <ul class="nav navbar-nav ">
        <li><a href="index.html">pypot 2.11.2 documentation</a></li>
    </ul>
<ul class="nav navbar-nav pull-right hidden-xs hidden-sm">
      
        <li><a href="installation.html" title="Installation" >previous</a></li>
        <li><a href="controlling_robot.html" title="Controlling robot" >next</a></li>
        <li><a href="py-modindex.html" title="Python Module Index" >modules</a></li>
        <li><a href="genindex.html" title="General Index" >index</a></li>
        <li><a href="#">top</a></li> 
      
    </ul>
  </div>
</div>
      </div><!-- /row -->

      <!-- footer -->
      <footer role="contentinfo">
          &copy; Copyright 2015, Poppy-Project.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.6.
      </footer>
      <!-- /footer -->

    </div>
    <!-- /container -->

  </body>
</html>